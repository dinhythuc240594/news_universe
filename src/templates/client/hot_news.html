<script>
    // Load hot news for sidebar
    $(document).ready(function() {
        $.get('{{ url_for("client.api_hot_news") }}?limit=5', function(data) {
            if (data.success && data.data.length > 0) {
                let html = '';
                data.data.forEach(function(news, index) {
                    html += `
                        <article class="most-read-item">
                            <span class="rank">${index + 1}</span>
                            <div class="content">
                                <h4><a href="/news/${news.slug}">${news.title}</a></h4>
                                <span class="meta"><i class="far fa-eye"></i> ${formatViewCount(news.view_count)}</span>
                            </div>
                        </article>
                    `;
                });
                $('.most-read-list').html(html);
            }
        });
        
        function formatViewCount(count) {
            if (count >= 1000000) return (count/1000000).toFixed(1) + 'M';
            if (count >= 1000) return (count/1000).toFixed(1) + 'K';
            return count;
        }
    });
</script>